---
- name: Install CLI Tools
  become: true
  dnf:
    name:
      - "bat"
      - "fish"
      - "exa"
      - "pydf"
      - "starship"
    state: present

- name: Create Config Directories
  file:
    dest: "{{ item }}"
    state: "directory"
  loop:
    - "~/.config/bat/themes"
    - "~/.config/fish/completions"
    - "~/.config/fish/conf.d"
    - "~/.config/fish/functions"

- name: "Bat: Copy Config"
  copy:
    src: "bat/config"
    dest: "~/.config/bat/config"
    mode: "0644"

- name: "Bat: Copy Theme"
  copy:
    src: "bat/Dracula.tmTheme"
    dest: "~/.config/bat/themes/Dracula.tmTheme"
    mode: "0644"

- name: "Bat: Build Cache"
  shell: "bat cache --build"

- name: "Fish: Copy Completions"
  copy:
    src: "{{ item }}"
    dest: "~/.config/fish/completions/{{ item | basename }}"
  with_fileglob: "fish/completions/*"

- name: "Fish: Copy Configuration"
  copy:
    src: "{{ item }}"
    dest: "~/.config/fish/conf.d/{{ item | basename }}"
  with_fileglob: "fish/conf.d/*"

- name: "Fish: Copy Functions"
  copy:
    src: "{{ item }}"
    dest: "~/.config/fish/functions/{{ item | basename }}"
  with_fileglob: "fish/functions/*"

- name: "Fish: Set Users Shell"
  become: true
  user:
    name: "tryton-vanmeer"
    shell: "/usr/bin/fish"
